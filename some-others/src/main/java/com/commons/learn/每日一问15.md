# 双亲委派

双亲委派是java类加载的一种机制，当一个类加载器收到了类加载的请求的时候，他不会直接去加载指定的类，而是把这个请求委托给自己的父加载器去加载。只有父加载器无法加载这个类的时候，才会由当前这个加载器来负责类的加载。

## 详述
Java中有两类加载器：
1. jvm中内置的类加载器：引导类加载器BootStrapClassLoader，c++实现、扩展类加载器ExtClassLoader、应用程序类加载器AppClassLoader
2. 用户通过继承ClassLoader获得的自定义加载器
其中 引导类加载器是扩展类加载器的父加载器，扩展类加载器是应用程序类加载器的父加载器（都不是继承关系，而是类中的定义了一个parent属性）。

在此基础上，当一个类加载器收到了类加载的请求，他不会直接去加载这个类，而是分为两步，向上委托和向下查找：
向上委托：当前类加载器的缓存中查找，找到了直接返回，没找到到父加载器中查找。
向下查找：当在引导类加载器的缓存中也没有时，开始自顶向下的到加载器负责的加载路径下查找，BootStrapClassLoader是jdk路径下的lib，ExtClassLoader是jdk路径下lib\ext包下，AppClassLoader加载classpath下的类。

## 好处、用处、意义
1. 通过委派的方式，可以避免类的重复加载，当父加载器已经加载过某一个类时，子加载器就不会再重新加载这个类。
2. 通过双亲委派的方式，还保证了安全性，避免用户自己编写类替换了Java的一些核心类，防止核心Java API被篡改。
