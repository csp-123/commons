

# elasticsearch 为什么速度快，效率高（这里要说出ES、MySQL有什么区别）

    MySQL：MySQL  innodb引擎采用的B+树索引，主键id采用聚簇索引，通过目录页查询到数据页，然后找到数据，速度还是很快的。对于非主键字段，会使用到二级索引，速度也还是可以的，
    但对于全文检索，不走索引，需要全表扫描，数据量大的情况下会很慢。
    
    ES：ES采用的倒排索引，对每个字段都建立一个倒排索引，形成一个term -> [id1,id2]（term对文档id的对应关系）。（也叫posting list，es对两个posting list，用bitmap取出共有id）
    另外，根据term前缀建立term index，查询时根据前缀查询term在字典里的区间位置，二分查找进一步查询到数据。

    聚簇索引：
        主键id通常采用聚簇索引
    非聚簇索引：
        非主键字段通常采用非聚簇索引，也叫二级索引，辅助索引等。叶子节点存的不是数据行的位置，而是主键值，通过二级索引查到主键值，再通过主键值查到数据页，再查到数据行。

# spring cloud使用过的组件
    Eureka：注册中心
    Zuul、Gateway：网关
    Hystrix：熔断器
    Ribbon：负载均衡
    Feign：服务调用


# spring cloud 熔断降级机制
    熔断器：Hystrix
    Hystrix是Netflix开源的一个延迟和容错库, 主要功能是提供服务降级, 线程隔离, 从而防止雪崩效应.
    目的：调用链上如果下游某个服务不可用了，可能会导致整个分布式系统出现问题，服务雪崩，熔断降级就是为了防止这样的问题发生。

    服务熔断：服务熔断通常是由错误或异常引起的，当发生某个异常，为了防止服务雪崩，直接熔断服务，不是等待超时。
        
    服务降级：当服务器压力剧增时，根据业务情况，对一些非核心的服务进行停服，保证核心业务正常进行。
    
    熔断通常是下游服务故障引起的，降级一般是从整体系统负荷考虑，由调用方决定的。
    

# 高并发解决方案
    1. 缓存：高并发场景，大多是读多写少，借助redis等，走缓存
    2. mq，大量的写请求放到消息队列里，排队慢慢消费，减轻数据库的压力
    3. 读写分离：业务允许的话，搞个主从，主库写，从库读。
    4. 分库分表，一个库分多个库，一个表分多个表，每个表的数据量不要太大，提升sql效率

# 消息中间件的作用
    异步优化：用户的请求不必走完全部业务流程在返回，业务请求成功发送到mq就可以返回了，，用户体验提高了，性能方面也更好了
    流量削峰：降低数据库压力
    降低耦合度

# nginx的功能
    反向代理
    负载均衡：轮询、ip_hash、权重
    动静分离
